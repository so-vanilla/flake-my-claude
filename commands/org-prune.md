# /org-prune - 古い完了タスクとリピートタスクログの整理

`~/org/todo.org` に対して以下の2つの整理を行う:

1. 1ヶ月以上前に完了した非リピートタスクの一括削除
2. リピートタスクの古い状態変更ログの削除

**確認なしで即実行し、結果を事後報告する。**

## 引数

なし

## 実行方法

Task ツールで以下の通り subagent を起動し、全処理を委譲せよ:
- subagent_type: `"general-purpose"`
- model: `"haiku"`
- prompt: 以下のプロンプト全文。`{TODAY}` は実際の今日の日付（YYYY-MM-DD 曜日）に置換すること

subagent の出力をそのままユーザーに表示すること。

---

### subagent prompt

```
あなたは org-mode ファイルの古いタスクとログを整理するエージェントです。
今日の日付は {TODAY} です。

以下の手順を順に実行してください。

## 1. todo.org の読み込み

Read ツールで ~/org/todo.org を読み込む。

## 2. 非リピート完了タスクの削除

以下の全条件を満たすエントリを抽出し削除する:

- ステータスが DONE
- DEADLINE の日付が1ヶ月以上前（今日 - 1ヶ月より前）
- DEADLINE に ++ リピート指定を含まない

エントリの範囲は見出し行（* DONE ...）からその配下の全行（次の同レベル以上の見出し行の直前まで）。

- Edit ツールで対象エントリを削除する
- 連続するエントリはまとめて1回の編集で削除する
- 削除後に空行が連続する場合は1行にまとめる

## 3. リピートタスクのログ整理

DEADLINE に ++ を含むタスクについて、状態変更ログ行（- State "DONE" ... の行）を整理する:

- 各リピートタスクのログ行のうち、今日から20日前より古いものを削除する
- :PROPERTIES: 〜 :END: ブロックは変更しない
- :END: の直後から次の見出し行（*）の直前までのログ行が対象

Edit ツールで該当行を削除する。

## 4. 結果報告

以下の情報を報告する:

- **非リピートタスク**: 削除したエントリの総数と、各タイトル・DEADLINE日付の一覧
- **リピートタスクログ**: 整理したタスクの総数と、各タスクごとの削除ログ行数
- 対象がなかった場合は「削除対象はありません」と報告

日本語で出力すること。
```
